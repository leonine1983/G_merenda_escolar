{% load static %}
{% load meus_filtros %}
{% block script_head %}<link rel="stylesheet" href="{% static 'global/css/css3_tab.css' %}">



{% endblock script_head %} 
{% block script_footer %}{% endblock script_footer %} 

<div class="modal fade" id="modal_escola"  tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    
    <div class="modal-dialog w-100">
        <div class="modal-content bg-secondary-subtle p-5">
            {% include "Escola/partials/mensagens.html" %}
            
            <div class="modal-header w-100 d-flex border-bottom border-secondary">
            <div class='d-flex justify-content-between w-100'> 
                <div><h1><img src="{% static 'svg/grade_horario.svg' %}" alt=""> Horários do {{horarios_filtrados.0.turma}}</h1></div>
                             
            </div>
                <button type="button" class="close" data-dismiss="modal">&times;</button>                
            </div>
            <hr class="mb-0">           
            <table class="win11-table">
              <thead class='bg-p-3'>
                <tr>
                  <th class='text-center'>Período</th>
                  <th class='text-center'>Segunda</th>
                  <th class='text-center'>Terça</th>
                  <th class='text-center'>Quarta</th>
                  <th class='text-center'>Quinta</th>
                  <th class='text-center'>Sexta</th>
                  <th class='text-center'>Ações</th>
                </tr>
              </thead>
              <tbody>
                {% for horario in horarios %}
                <tr>
                  <td>{{ horario.periodo }}</td>
                  <td>{{ horario.segunda }}</td>
                  <td>{{ horario.terca }}</td>
                  <td>{{ horario.quarta }}</td>
                  <td>{{ horario.quinta }}</td>
                  <td>{{ horario.sexta }}</td>
                  <td>
                    <!-- <a href="" class="btn btn-warning btn-sm">Editar</a>
                  Adicione um botão de excluir se necessário -->
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
            
            <h2 class="mt-5">{% if form.instance.pk %}Editar Horário{% else %}Criar Horário {{object}}{% endif %}</h2> 
            {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
            {% endif %} 
            

            <h2>Atualizar Horários - Turma: {{ turma.nome }}</h2>
            <form method="post">
              {% csrf_token %}
              {{ formset.management_form }}
              <table>
                  <thead>
                      <tr>
                          <th>Período</th>
                          {% for dia in dias_semana %}
                              <th>{{ dia.nome_dia }}</th>
                          {% endfor %}
                      </tr>
                  </thead>
                  <tbody>
                      {% for periodo in periodos %}
                          <tr>
                              <td>{{ periodo.nome_periodo }}

                                <select name="form-{{forloop.counter0}}-periodo" id="id_form-{{forloop.counter0}}-periodo">          
                                  <option value="{{perido.pk}}" selected="">{{forloop.counter0}}</option>                                
                                </select>
                              </td>
                              {% for dia in dias_semana %}
                                 
                                      {% for form in formset %}
                                      <td>
                                              {{ form.turma_disciplina }}
                                              {{ form.instance.pk }}
                                              {{ form.id }}
                                              {{ form.non_field_errors }} 
                                              {{ form.errors }} <!-- Adicione esta linha para depuração -->
                                            </td>
                                       
                                      {% endfor %}
                                 
                              {% endfor %}
                          </tr>
                      {% endfor %}
                  </tbody>
              </table>
              <button type="submit">Salvar alterações</button>
          </form>
          
          

        </div>
    </div>
</div>


